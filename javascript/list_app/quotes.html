<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>List App</title>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
</head>
<body>
  <div id="quotes"></div>
  <script type="text/babel">

    class App extends React.Component {
      constructor() {
        super();
        this.state = { quotes: [] };
      }

      componentDidMount() {
        const quotesApi = 'https://gist.githubusercontent.com/anonymous/8f61a8733ed7fa41c4ea/raw/1e90fd2741bb6310582e3822f59927eb535f6c73/quotes.json';
        fetch(quotesApi)
        .then(response => response.json())
        .then(quotes => {
          this.setState({ quotes });
        });
      }

      render() {
        return (
          <div>
            <h1>Quotes</h1>
            <Quotes quotes={this.state.quotes}/>
          </div>
        )
      }
    }

    const Quotes = ({ quotes }) => {
      console.log(quotes)
      const quoteItems = quotes.map((quote, index) => {
        return (
          <Quote key={index} quote={quote} />
        )
      })

      if(!quotes) {
        return <div>Loading...</div>
      }

      return (
        <div>
          <p>Quote</p>
          <table>
            <thead>
              <tr>
                <th>Source</th>
                <th>Context</th>
                <th>Quote</th>
                <th>Theme</th>
              </tr>
            </thead>
            <tbody>
              {quoteItems}
            </tbody>
          </table>
        </div>          
      )
    }

    const Quote = ({ quote }) => {
      if(!quote) {
        return <div>Loading..</div>
      }
      return (
        <tr>
          <td>{quote.source}</td>
          <td>{quote.context}</td>
          <td>{quote.quote}</td>
          <td>{quote.theme}</td>
        </tr>
      )
    }

    ReactDOM.render(
      <div>
        <App />
      </div>,
      document.getElementById('quotes')
    );
  </script>
</body>
</html>
